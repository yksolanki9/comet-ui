<ion-header class="home__header ion-no-border">
  <ion-toolbar>
    <ion-title class="home__header__title">My diary</ion-title>
    <!-- TODO: Provide option to logout on clicking this button -->
    <ion-icon
      class="home__header__icon"
      slot="end"
      name="ellipsis-vertical"
      id="click-trigger"
    ></ion-icon>
  </ion-toolbar>
</ion-header>

<ion-content>
  <ion-popover #optionsPopover trigger="click-trigger" triggerAction="click">
    <ng-template>
      <ion-content class="ion-padding" (click)="logout()"> Log Out</ion-content>
    </ng-template>
  </ion-popover>

  <div class="home__content">
    <ng-container *ngIf="!isLoading; else loader">
      <ng-container *ngFor="let note of notes">
        <app-note-card
          [note]="note"
          (openNote)="openNote(note._id)"
        ></app-note-card>
      </ng-container>
    </ng-container>

    <ng-template #loader>
      <ng-container *ngFor="let i of [0, 1, 2, 3, 4, 5, 6, 7, 8 ,9]">
        <ion-card>
          <ion-card-header>
            <ion-card-title>
              <ion-skeleton-text
                style="height: 24px; width: 30%"
                [animated]="true"
              ></ion-skeleton-text>
            </ion-card-title>
            <ion-card-subtitle>
              <ion-skeleton-text
                style="height: 14px; width: 70%"
                [animated]="true"
              ></ion-skeleton-text
            ></ion-card-subtitle>
            <ion-card-subtitle>
              <ion-skeleton-text
                style="height: 14px"
                [animated]="true"
              ></ion-skeleton-text
            ></ion-card-subtitle>
          </ion-card-header>
        </ion-card>
      </ng-container>
    </ng-template>
  </div>

  <ion-fab class="home__fab" vertical="bottom" horizontal="end" slot="fixed">
    <ion-fab-button (click)="createNote()">
      <ion-icon name="add"></ion-icon>
    </ion-fab-button>
  </ion-fab>
</ion-content>
